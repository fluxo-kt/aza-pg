# Hadolint Configuration for aza-pg
# ==================================
# PostgreSQL 18 multi-stage Docker builds with 38 extensions
# Enforces best practices while allowing project-specific patterns

# Rules to ignore (with rationale)
ignored:
  # DL3008: Debian apt-get pin versions in RUN
  # IGNORED: We use PGDG apt repository with explicit version pins (e.g., postgresql-18-vector=0.8.1-2.pgdg13+1)
  # The rule conflicts with our version pinning strategy which is more effective than apt-get args
  - DL3008

  # DL3009: Delete apt-get cache
  # IGNORED: We do clean up cache (apt-get clean && rm -rf /var/lib/apt/lists/*),
  # but in different RUN layers during multi-stage builds. This is intentional for layer efficiency.
  # Hadolint's static analysis doesn't account for multi-stage optimization.
  - DL3009

# Failure threshold: fail on errors, warn on warnings
# This allows CI/CD to catch critical issues while permitting review of warnings
failure-threshold: warning

# Format for output: parseable (CI-friendly), can be: json, sarif, parseable
format: parseable
