# PostgreSQL Single Instance Configuration
# Copy this file to .env and customize
#
# SECURITY: After copying, set restrictive permissions:
#   chmod 600 .env
# Never commit .env files to version control!

# Project Configuration
COMPOSE_PROJECT_NAME=aza-pg

# Container Settings
# For development (auto-updates with new builds):
POSTGRES_IMAGE=ghcr.io/fluxo-kt/aza-pg:pg18

# For production (immutable - recommended):
# POSTGRES_IMAGE=ghcr.io/fluxo-kt/aza-pg:18.1-202511142330-single-node  # Versioned tag
# POSTGRES_IMAGE=ghcr.io/fluxo-kt/aza-pg:pg18@sha256:<digest>  # SHA digest
POSTGRES_CONTAINER_NAME=postgres-single
POSTGRES_EXPORTER_CONTAINER_NAME=postgres-exporter-single

# Database Settings
POSTGRES_DB=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_strong_password_here

# Network Binding (127.0.0.1 for local, 0.0.0.0 for network access)
# Port Allocation Strategy (for side-by-side deployments):
#   Primary:  5432 (postgres), 6432 (pgbouncer), 9187 (pg_exporter), 9127 (pgb_exporter)
#   Replica:  5433 (postgres), 9188 (pg_exporter) - offset to avoid conflicts
#   Single:   5432 (postgres), 9189 (pg_exporter) - standard postgres port
POSTGRES_BIND_IP=127.0.0.1
POSTGRES_PORT=5432
POSTGRES_EXPORTER_BIND_IP=127.0.0.1
POSTGRES_EXPORTER_PORT=9189

# Resource Limits (adjust based on available RAM/CPU)
POSTGRES_MEMORY_LIMIT=512m
POSTGRES_MEMORY_RESERVATION=256m
POSTGRES_CPU_LIMIT=0.5
POSTGRES_EXPORTER_MEMORY_LIMIT=64m
POSTGRES_EXPORTER_MEMORY_RESERVATION=32m

# Volume Names (must match compose.yml volume declarations)
POSTGRES_DATA_VOLUME=postgres_data

# Network Names
POSTGRES_NETWORK_NAME=postgres-single-net
MONITORING_NETWORK=monitoring

# Exporter Images
POSTGRES_EXPORTER_IMAGE=prometheuscommunity/postgres-exporter:v0.18.1
