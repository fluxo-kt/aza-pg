# PostgreSQL Configuration
# Stack: single
# Generated by scripts/config-generator/generator.ts
#
# DO NOT EDIT MANUALLY - Changes will be overwritten
# Edit scripts/config-generator/base-config.ts and regenerate

# CONNECTION
listen_addresses = '*'
port = 5432
shared_preload_libraries = 'pg_stat_statements,auto_explain,pg_cron,pgaudit'
idle_session_timeout = '0'

# IO
io_method = 'worker'
io_combine_limit = 128

# LOGGING
log_destination = 'stderr'
logging_collector = 'off'
log_min_duration_statement = 1000
log_line_prefix = '%t [%p]: [%l-1] user=%u,db=%d,app=%a,client=%h '
log_lock_waits = 'on'
log_temp_files = 0
log_timezone = 'UTC'
log_checkpoints = 'on'
log_connections = 'on'
log_disconnections = 'on'
log_autovacuum_min_duration = 0

# LOCALE
timezone = 'UTC'
lc_messages = 'en_US.utf8'
lc_monetary = 'en_US.utf8'
lc_numeric = 'en_US.utf8'
lc_time = 'en_US.utf8'
default_text_search_config = 'pg_catalog.english'

# PG STAT STATEMENTS
pg_stat_statements.max = 10000
pg_stat_statements.track = 'all'

# AUTO EXPLAIN
auto_explain.log_min_duration = '3s'
auto_explain.log_analyze = 'on'
auto_explain.log_buffers = 'on'
auto_explain.log_nested_statements = 'on'
auto_explain.log_timing = 'off'

# AUTOVACUUM
autovacuum = 'on'
autovacuum_naptime = '1min'
autovacuum_vacuum_cost_delay = '2ms'
autovacuum_vacuum_cost_limit = 2000
autovacuum_vacuum_scale_factor = 0.1
autovacuum_analyze_scale_factor = 0.05
autovacuum_freeze_max_age = 200000000

# CHECKPOINTS
checkpoint_completion_target = 0.9

# WAL
wal_level = 'minimal'
wal_compression = 'lz4'
max_wal_senders = 0

# PGAUDIT
pgaudit.log = 'none'

# Runtime auto-configuration
# The following settings are set at container startup based on available resources:
# - shared_buffers, effective_cache_size, maintenance_work_mem, work_mem
# - max_connections, max_worker_processes, max_parallel_workers
# Set POSTGRES_SKIP_AUTOCONFIG=true to disable